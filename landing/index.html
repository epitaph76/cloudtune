<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CloudTune - fullstack музыкальный сервис</title>
  <meta
    name="description"
    content="CloudTune: Flutter клиент (Android + Windows), Go backend, PostgreSQL, облачное хранилище и Telegram-мониторинг."
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Unbounded:wght@500;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg-0: #120d0a;
      --bg-1: #1e1510;
      --bg-2: #2a1c14;
      --card: rgba(28, 20, 15, 0.88);
      --line: rgba(224, 178, 141, 0.24);
      --text: #f6e4d3;
      --muted: #cfb7a3;
      --accent: #e6b58c;
      --accent-2: #8fd0b1;
      --accent-3: #88a8ff;
      --radius-lg: 26px;
      --radius-md: 16px;
      --shadow: 0 24px 60px rgba(0, 0, 0, 0.42);
      --mono: "Unbounded", "Manrope", sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      color: var(--text);
      font-family: "Manrope", system-ui, -apple-system, "Segoe UI", sans-serif;
      background:
        radial-gradient(1100px 540px at 16% -4%, rgba(227, 177, 134, 0.15), transparent 58%),
        radial-gradient(800px 540px at 98% 0%, rgba(141, 193, 255, 0.14), transparent 56%),
        linear-gradient(165deg, var(--bg-0), var(--bg-1) 56%, var(--bg-2));
      min-height: 100vh;
      padding: 28px 18px 40px;
    }

    .page {
      width: min(1160px, 100%);
      margin: 0 auto;
      display: grid;
      gap: 18px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
    }

    .hero {
      padding: clamp(22px, 3.5vw, 36px);
      display: grid;
      gap: 16px;
    }

    .eyebrow {
      margin: 0;
      width: fit-content;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      border-radius: 999px;
      border: 1px solid rgba(231, 192, 160, 0.4);
      background: rgba(230, 181, 140, 0.16);
      color: #f8dcc2;
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-weight: 700;
    }

    h1 {
      margin: 0;
      font-family: var(--mono);
      letter-spacing: -0.01em;
      font-size: clamp(28px, 5vw, 52px);
      line-height: 1.07;
      max-width: 18ch;
    }

    .hero p {
      margin: 0;
      color: var(--muted);
      line-height: 1.68;
      max-width: 78ch;
      font-size: 17px;
    }

    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 2px;
    }

    .btn {
      text-decoration: none;
      border: 1px solid transparent;
      border-radius: 14px;
      padding: 11px 16px;
      font-weight: 700;
      font-size: 15px;
      transition: transform 0.18s ease, box-shadow 0.2s ease, background 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    .btn-primary {
      color: #29170c;
      background: linear-gradient(135deg, #f2c8a2, #d79665);
      box-shadow: 0 10px 28px rgba(226, 152, 91, 0.34);
    }

    .btn-secondary {
      color: #f2d8c2;
      border-color: rgba(233, 189, 154, 0.35);
      background: rgba(76, 51, 36, 0.45);
    }

    .meta {
      list-style: none;
      margin: 4px 0 0;
      padding: 0;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .meta li {
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(227, 183, 145, 0.34);
      background: rgba(52, 34, 24, 0.62);
      font-size: 12px;
      color: #ead1be;
      font-family: var(--mono);
    }

    .grid-2 {
      display: grid;
      gap: 18px;
      grid-template-columns: 1.15fr 0.85fr;
    }

    .section {
      padding: 24px;
      display: grid;
      gap: 14px;
    }

    .section h2 {
      margin: 0;
      font-size: 25px;
      letter-spacing: -0.01em;
      font-family: var(--mono);
    }

    .section p {
      margin: 0;
      line-height: 1.65;
      color: var(--muted);
    }

    .feature-list {
      display: grid;
      gap: 9px;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
    }

    .feature {
      border: 1px solid rgba(230, 181, 140, 0.24);
      border-radius: 14px;
      background: rgba(58, 38, 27, 0.52);
      color: #f0d8c6;
      padding: 12px 13px;
      font-size: 14px;
      line-height: 1.5;
    }

    .arch {
      display: grid;
      gap: 10px;
    }

    .arch-step {
      border: 1px solid rgba(229, 188, 150, 0.3);
      border-radius: 12px;
      background: rgba(62, 41, 29, 0.56);
      color: #f1d9c6;
      padding: 11px 12px;
      font-size: 14px;
    }

    .media-grid {
      display: grid;
      gap: 14px;
      grid-template-columns: 1fr 1fr;
    }

    figure {
      margin: 0;
      border-radius: var(--radius-md);
      border: 1px solid rgba(233, 194, 160, 0.3);
      overflow: hidden;
      background: rgba(53, 35, 25, 0.64);
    }

    .media-wrap {
      position: relative;
      width: 100%;
      aspect-ratio: 16 / 10;
      background: #0e0b09;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .media-wrap.mobile {
      aspect-ratio: 9 / 16;
      max-height: 720px;
      margin: 0 auto;
      width: min(100%, 360px);
    }

    .media-wrap img,
    .media-wrap video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    figcaption {
      padding: 10px 12px;
      font-size: 13px;
      color: #d6bdab;
      border-top: 1px solid rgba(233, 194, 160, 0.24);
    }

    .downloads {
      display: grid;
      gap: 10px;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
    }

    .download-card {
      border: 1px solid rgba(222, 181, 145, 0.28);
      border-radius: 14px;
      background: rgba(60, 40, 29, 0.55);
      padding: 14px;
      display: grid;
      gap: 10px;
    }

    .download-card h3 {
      margin: 0;
      font-size: 17px;
      font-family: var(--mono);
      color: #f7dfca;
    }

    .download-card p {
      margin: 0;
      font-size: 14px;
      color: #d3bca9;
      line-height: 1.5;
    }

    .stack {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .stack span {
      border: 1px solid rgba(224, 181, 144, 0.34);
      border-radius: 999px;
      background: rgba(66, 44, 31, 0.58);
      padding: 7px 11px;
      font-size: 13px;
      color: #ecd2bf;
      font-weight: 600;
    }

    .changelog {
      display: grid;
      gap: 10px;
    }

    .change-item {
      border: 1px solid rgba(226, 183, 145, 0.3);
      border-radius: 14px;
      background: rgba(61, 40, 29, 0.56);
      padding: 12px 13px;
      display: grid;
      gap: 8px;
    }

    .change-head {
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      justify-content: space-between;
      gap: 8px;
    }

    .change-head strong {
      font-size: 15px;
      font-family: var(--mono);
      color: #f7dec8;
    }

    .change-date {
      font-size: 12px;
      color: #d6bcaa;
      border: 1px solid rgba(225, 184, 147, 0.3);
      border-radius: 999px;
      padding: 4px 8px;
      background: rgba(70, 47, 34, 0.58);
      font-family: var(--mono);
    }

    .change-note {
      margin: 0;
      color: #e4cab7;
      font-size: 14px;
      line-height: 1.55;
    }

    footer {
      text-align: center;
      color: #b99f8b;
      font-size: 13px;
      padding: 8px 4px 0;
    }

    .reveal {
      opacity: 0;
      transform: translateY(16px);
      animation: reveal 0.68s cubic-bezier(0.22, 0.65, 0.25, 1) forwards;
    }

    .delay-1 { animation-delay: 0.08s; }
    .delay-2 { animation-delay: 0.16s; }
    .delay-3 { animation-delay: 0.24s; }

    @keyframes reveal {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 980px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }

      .media-grid {
        grid-template-columns: 1fr;
      }

      .hero p {
        font-size: 16px;
      }
    }

    @media (max-width: 640px) {
      body {
        padding: 16px 12px 24px;
      }

      .hero,
      .section {
        padding: 18px;
      }

      .hero-actions {
        width: 100%;
      }

      .btn {
        width: 100%;
      }

      .media-wrap.mobile {
        width: min(100%, 310px);
      }
    }
  </style>
</head>
<body>
  <main class="page">
    <header class="card hero reveal">
      <p class="eyebrow">CloudTune • проект в проде</p>
      <h1>Музыкальный fullstack c локальным и облачным режимом</h1>
      <p>
        CloudTune уже работает в проде: Flutter-клиент для Android и Windows, Go API, PostgreSQL,
        файловое хранилище и мониторинг через Telegram-бота. Это не концепт, а боевой проект,
        где закрыт цикл от загрузки треков до наблюдаемости сервера.
      </p>
      <div class="hero-actions">
        <a class="btn btn-primary" href="https://github.com/epitaph76/cloudtune" target="_blank" rel="noopener noreferrer">GitHub репозиторий</a>
        <a class="btn btn-secondary" href="https://api-mp3-player.ru/health" target="_blank" rel="noopener noreferrer">Проверить /health</a>
      </div>
      <ul class="meta">
        <li>Backend: Go 1.24 + Gin</li>
        <li>DB: PostgreSQL 15</li>
        <li>Client: Flutter 3.41.1 / Dart 3.11.0</li>
        <li>Monitoring: Python 3.12</li>
      </ul>
    </header>

    <section class="grid-2">
      <article class="card section reveal delay-1">
        <h2>Что внутри проекта</h2>
        <p>
          Здесь только ключевые и технически сложные части, которые дают проекту устойчивость
          и масштабируемость в реальном использовании.
        </p>
        <div class="feature-list">
          <div class="feature">Дедупликация загрузок по <code>content_hash</code>: сервер не хранит дубликаты и не тратит диск зря.</div>
          <div class="feature">Синхронизация локальной и облачной библиотек с проверкой существующих треков перед загрузкой.</div>
          <div class="feature">Фоновый аудиодвижок (queue, shuffle/repeat, media session) без остановки при сворачивании.</div>
          <div class="feature">Кроссплатформенный UI (Android + Windows) с общим кодовым ядром и отдельной desktop-оболочкой.</div>
          <div class="feature">Продовый мониторинг: метрики, статус хранилища, алерты и команды через Telegram-бота.</div>
          <div class="feature">Docker-инфраструктура на Ubuntu 22.04: API, PostgreSQL, Nginx reverse proxy и SSL.</div>
        </div>
      </article>

      <aside class="card section reveal delay-2">
        <h2>Схема работы</h2>
        <div class="arch">
          <div class="arch-step">Flutter App -> REST API (JWT)</div>
          <div class="arch-step">Go Backend -> PostgreSQL + файловый storage</div>
          <div class="arch-step">Monitoring Bot -> /api/monitor/*</div>
          <div class="arch-step">Nginx + TLS -> api-mp3-player.ru</div>
        </div>
        <p>
          Сервер запущен на VDS (Ubuntu 22.04, 2 vCPU, 2 GB RAM, 20 GB SSD).
          Схема ориентирована на экономный расход ресурсов и контролируемые апдейты.
        </p>
      </aside>
    </section>

    <section class="card section reveal delay-2">
      <h2>Демо работы</h2>
      <p>
        Вместо скриншотов ниже живые записи интерфейса: desktop-версия в GIF и Android-версия в видео.
      </p>
      <div class="media-grid">
        <figure>
          <div class="media-wrap">
            <img src="assets/media/desktop-demo.gif" alt="CloudTune desktop demo" loading="lazy" />
          </div>
          <figcaption>Desktop (Windows): работа хранилища и плеера в двухпанельном интерфейсе.</figcaption>
        </figure>
        <figure>
          <div class="media-wrap mobile">
            <video
              src="assets/media/android-demo.mp4"
              autoplay
              muted
              loop
              playsinline
              controls
              preload="metadata"
            ></video>
          </div>
          <figcaption>Android: реальная запись экрана приложения с управлением воспроизведением.</figcaption>
        </figure>
      </div>
    </section>

    <section class="card section reveal delay-3">
      <h2>Как скачать</h2>
      <div class="downloads">
        <article class="download-card">
          <h3>Desktop версия (Windows)</h3>
          <p>Для установки скачайте архив desktop-сборки и распакуйте его на ПК. Актуальный релиз: 1.8.3+6 (обновлен 27.02.2026).</p>
          <a class="btn btn-primary" href="/cloudtune_win.zip?v=1.8.3%2B6-20260227-playlistfix-localization">Скачать архив (.zip)</a>
        </article>
        <article class="download-card">
          <h3>Android версия</h3>
          <p>Можно установить APK напрямую или скачать приложение из RuStore. Актуальный релиз: 1.8.3+6 (обновлен 27.02.2026).</p>
          <a class="btn btn-primary" href="/cloudtune_andr.apk?v=1.8.3%2B6-20260227-playlistfix-localization">Скачать APK</a>
          <a class="btn btn-secondary" href="https://www.rustore.ru/catalog/app/com.example.cloudtune_flutter_app" target="_blank" rel="noopener noreferrer">Открыть в RuStore</a>
        </article>
      </div>
    </section>

    <section class="card section reveal delay-3">
      <h2>Стек и версии</h2>
      <div class="stack">
        <span>Go 1.24 (go.mod)</span>
        <span>Gin 1.9.1</span>
        <span>PostgreSQL 15</span>
        <span>Flutter 3.41.1</span>
        <span>Dart 3.11.0</span>
        <span>just_audio 0.9.46</span>
        <span>audio_service 0.18.18</span>
        <span>flutter_secure_storage 9.2.4</span>
        <span>flutter_local_notifications 19.5.0</span>
        <span>python-telegram-bot 22.3</span>
        <span>httpx 0.28.1</span>
        <span>Docker Compose</span>
      </div>
      <p>
        Исходники, README и скрипты деплоя: <a href="https://github.com/epitaph76/cloudtune" target="_blank" rel="noopener noreferrer">github.com/epitaph76/cloudtune</a>.
      </p>
    </section>

    <section class="card section reveal delay-3">
      <h2>История обновлений</h2>
      <div class="changelog">
        <article class="change-item">
          <div class="change-head">
            <strong>Пагинация, серверный поиск и ускорение больших библиотек</strong>
            <span class="change-date">26.02.2026</span>
          </div>
          <p class="change-note">
            В API добавлены limit/offset/search для библиотек и плейлистов, клиент переведен на lazy-подгрузку, экран серверного хранилища декомпозирован на отдельные компоненты/сервисы, добавлены новые тесты и улучшена наблюдаемость upload-ошибок.
          </p>
        </article>
        <article class="change-item">
          <div class="change-head">
            <strong>Единый деплой через Telegram + автотесты</strong>
            <span class="change-date">25.02.2026</span>
          </div>
          <p class="change-note">
            Добавлен запуск деплоя из бота: обновляются backend и лендинги, выполняются подробные post-deploy тесты API, а при ошибке автоматически выполняется rollback на предыдущий commit с отправкой причины в Telegram.
          </p>
        </article>
        <article class="change-item">
          <div class="change-head">
            <strong>Релиз клиента 1.8.3+6</strong>
            <span class="change-date">24.02.2026</span>
          </div>
        </article>
        <article class="change-item">
          <div class="change-head">
            <strong>Оптимизация облачной загрузки/скачивания</strong>
            <span class="change-date">23.02.2026</span>
          </div>
          <p class="change-note">
            Добавлены bulk-операции для плейлистов, параллельные загрузки, ускоренная отдача файлов через Nginx и новые upload-метрики в мониторинге.
          </p>
        </article>
        <article class="change-item">
          <div class="change-head">
            <strong>Расширен Telegram-мониторинг</strong>
            <span class="change-date">23.02.2026</span>
          </div>
          <p class="change-note">
            Бот переведен в отдельный systemd-сервис (вне Docker), добавлены карточки пользователя, файлы и плейлисты с постраничным просмотром.
          </p>
        </article>
      </div>
    </section>

    <footer>CloudTune • обновлено 26.02.2026 • api-mp3-player.ru</footer>
  </main>
</body>
</html>
