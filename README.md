# CloudTune

Облачный музыкальный плеер с поддержкой загрузки, хранения и воспроизведения музыкальных файлов.

## Структура проекта

- `backend/` - серверная часть на Go с API для аутентификации, загрузки и управления музыкальными файлами
- `frontend/` - клиентская часть на Flutter с возможностью выбора файлов, воспроизведения и управления плейлистами

## Backend

Backend написан на Go и предоставляет следующие возможности:

- Аутентификация пользователей с использованием JWT
- Загрузка и хранение музыкальных файлов
- Управление пользовательской библиотекой
- Создание и управление плейлистами
- Защита файлов - доступ только владельцу

### API Эндпоинты

#### Аутентификация
- `POST /auth/register` - регистрация пользователя
- `POST /auth/login` - вход пользователя

#### Работа с песнями
- `POST /api/songs/upload` - загрузка новой песни (требует аутентификации)
- `GET /api/songs/library` - получить библиотеку пользователя (требует аутентификации)
- `GET /api/songs/:id` - получить информацию о песне (требует аутентификации)

#### Работа с плейлистами
- `POST /api/playlists` - создать новый плейлист (требует аутентификации)
- `GET /api/playlists` - получить плейлисты пользователя (требует аутентификации)
- `POST /api/playlists/:playlist_id/songs/:song_id` - добавить песню в плейлист (требует аутентификации)
- `GET /api/playlists/:playlist_id/songs` - получить песни из плейлиста (требует аутентификации)

### Запуск

1. Установите Docker и Docker Compose
2. Перейдите в директорию `backend/`
3. Запустите `docker-compose up --build`

Сервер будет доступен по адресу `http://localhost:8080`

## Frontend

Frontend написан на Flutter и включает:

- 4 основные страницы с навигацией в нижней панели:
  1. Главная страница - список треков из локальной музыки с возможностью воспроизведения
  2. Профиль - регистрация/вход и информация о пользователе
  3. Локальная музыка - выбор и загрузка музыкальных файлов с устройства
  4. Серверная музыка - заглушка для будущей функциональности облачного хранения

- Воспроизведение музыки с возможностью управления (воспроизведение, пауза, перемотка)
- Сохранение состояния между сессиями (данные пользователя и выбранные файлы)

### Запуск

1. Установите Flutter SDK
2. Перейдите в директорию `frontend/cloudtune_flutter_app/`
3. Выполните `flutter pub get`
4. Запустите `flutter run`

## Архитектура системы облачного хранения

Система облачного хранения музыки включает:

- Единое хранилище файлов на сервере
- Связь файлов с пользователями через библиотеку (user_library)
- Возможность создания и управления плейлистами
- Защита доступа к файлам - только владелец может управлять своими файлами
- Поддержка различных форматов аудио (MP3, WAV, MP4, FLAC)

## Деплой на сервер

Сервер настроен на домене api.api-mp3-player.ru с SSL сертификатом.